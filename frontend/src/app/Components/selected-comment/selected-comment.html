<div class="max-w-2xl mx-auto p-6 bg-white rounded-xl shadow">
  <button  (click)="back()" class="text-blue-600 hover:underline mb-4">← Back</button>

  <div *ngIf="comment$ | async as comment">
    <div *ngIf="comment.parentComment" class="mb-6 p-4 bg-gray-50 rounded-lg border">
      <h2 class="font-semibold mb-2">Parent Comment</h2>
      <app-reply-comment [parentComment]="comment.parentComment"></app-reply-comment>
    </div>

    <div class="mb-6">
      <h2 class="text-lg font-semibold text-gray-800 mb-1">{{ comment.username }}</h2>
      <p class="text-gray-700">{{ comment.content }}</p>
      <p class="text-sm text-gray-500">{{ comment.createdAt | date:'short' }}</p>
      <button *ngIf="comment.fileType" (click)="download(comment)"
            class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded transition">
            Download {{comment.fileType}}
          </button>
    </div>

    <div class="mb-6">
      <h3 class="text-md font-semibold text-gray-700 mb-2">Replies</h3>
      <div *ngIf="comment.replies?.length; else noReplies">
        <div *ngFor="let reply of comment.replies" class="border-t py-2">
          <app-reply-comment [parentComment]="reply"></app-reply-comment>
        </div>
      </div>
      <ng-template #noReplies>
        <p class="text-gray-500 italic">No replies yet</p>
      </ng-template>
    </div>

    <h3 class="font-semibold text-gray-700 mb-2">Reply</h3>
    <app-comment-form (commentAdded)="onReplyAdded()"></app-comment-form>
  </div>
</div>
